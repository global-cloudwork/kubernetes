==== START logs for container helm of pod kube-system/helm-install-rke2-cilium-nl5nl ====
if [[ ${KUBERNETES_SERVICE_HOST} =~ .*:.* ]]; then
	echo "KUBERNETES_SERVICE_HOST is using IPv6"
	CHART="${CHART//%\{KUBERNETES_API\}%/[${KUBERNETES_SERVICE_HOST}]:${KUBERNETES_SERVICE_PORT}}"
else
	CHART="${CHART//%\{KUBERNETES_API\}%/${KUBERNETES_SERVICE_HOST}:${KUBERNETES_SERVICE_PORT}}"
fi

set +v -x
+ [[ '' == \v\2 ]]
+ shopt -s nullglob
+ [[ -f /config/ca-file.pem ]]
+ [[ -f /tmp/ca-file.pem ]]
+ [[ false == \t\r\u\e ]]
+ [[ false == \t\r\u\e ]]
+ [[ -n '' ]]
+ helm_content_decode
+ set -e
+ ENC_CHART_PATH=/chart/rke2-cilium.tgz.base64
+ CHART_PATH=/tmp/rke2-cilium.tgz
+ [[ ! -f /chart/rke2-cilium.tgz.base64 ]]
+ base64 -d /chart/rke2-cilium.tgz.base64
+ CHART=/tmp/rke2-cilium.tgz
+ set +e
+ [[ install != \d\e\l\e\t\e ]]
+ helm_repo_init
+ grep -q -e 'https\?://'
+ [[ /tmp/rke2-cilium.tgz == stable/* ]]
+ [[ -n '' ]]
+ helm_update install --set-string global.clusterCIDR=10.42.0.0/16 --set-string global.clusterCIDRv4=10.42.0.0/16 --set-string global.clusterDNS=10.43.0.10 --set-string global.clusterDomain=cluster.local --set-string global.rke2DataDir=/var/lib/rancher/rke2 --set-string global.serviceCIDR=10.43.0.0/16 --set-string global.systemDefaultIngressClass=ingress-nginx
++ helm ls --all -f '^rke2-cilium$' --namespace kube-system --output json
++ jq -r '"\(.[0].chart),\(.[0].status)"'
++ tr '[:upper:]' '[:lower:]'
+ LINE=rke2-cilium-1.18.103,deployed
+ IFS=,
+ read -r INSTALLED_VERSION STATUS _
+ VALUES=
+ for VALUES_FILE in /config/*.yaml
+ VALUES=' --values /config/values-1-000-HelmChartConfig-ValuesContent.yaml'
+ [[ install = \d\e\l\e\t\e ]]
+ [[ rke2-cilium-1.18.103 =~ ^(|null)$ ]]
+ [[ deployed =~ ^(pending-install|pending-upgrade|pending-rollback|uninstalling)$ ]]
+ [[ deployed =~ ^deployed$ ]]
+ echo 'Already installed rke2-cilium'
Already installed rke2-cilium
+ helm mapkubeapis rke2-cilium --namespace kube-system
2025/10/06 02:50:35 Release 'rke2-cilium' will be checked for deprecated or removed Kubernetes APIs and will be updated if necessary to supported API versions.
2025/10/06 02:50:35 Get release 'rke2-cilium' latest version.
2025/10/06 02:50:36 Check release 'rke2-cilium' for deprecated or removed APIs...
2025/10/06 02:50:36 Finished checking release 'rke2-cilium' for deprecated or removed APIs.
2025/10/06 02:50:36 Release 'rke2-cilium' has no deprecated or removed APIs.
2025/10/06 02:50:36 Map of release 'rke2-cilium' deprecated or removed APIs to supported versions, completed successfully.
+ echo 'Upgrading helm chart'
+ echo 'Upgrading rke2-cilium'
+ shift 1
Upgrading rke2-cilium
+ helm upgrade --set-string global.clusterCIDR=10.42.0.0/16 --set-string global.clusterCIDRv4=10.42.0.0/16 --set-string global.clusterDNS=10.43.0.10 --set-string global.clusterDomain=cluster.local --set-string global.rke2DataDir=/var/lib/rancher/rke2 --set-string global.serviceCIDR=10.43.0.0/16 --set-string global.systemDefaultIngressClass=ingress-nginx rke2-cilium /tmp/rke2-cilium.tgz --values /config/values-1-000-HelmChartConfig-ValuesContent.yaml
Release "rke2-cilium" has been upgraded. Happy Helming!
NAME: rke2-cilium
LAST DEPLOYED: Mon Oct  6 02:50:36 2025
NAMESPACE: kube-system
STATUS: deployed
REVISION: 2
TEST SUITE: None
NOTES:
You have successfully installed Rke2-Cilium with Hubble Relay and Hubble UI.

Your release version is 1.18.103.

For any further help, visit https://docs.cilium.io/en/v1.18/gettinghelp
+ exit
==== END logs for container helm of pod kube-system/helm-install-rke2-cilium-nl5nl ====
